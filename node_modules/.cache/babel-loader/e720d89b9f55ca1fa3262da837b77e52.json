{"ast":null,"code":"import * as asn1js from \"asn1js\";\nimport { getParametersValue, clearProps } from \"pvutils\";\nimport RelativeDistinguishedNames from \"./RelativeDistinguishedNames.js\"; //**************************************************************************************\n//region Additional asn1js schema elements existing inside GeneralName schema\n//**************************************************************************************\n\n/**\r\n * Schema for \"builtInStandardAttributes\" of \"ORAddress\"\r\n * @param {Object} parameters\r\n * @property {Object} [names]\r\n * @param {boolean} optional\r\n * @returns {Sequence}\r\n */\n\nfunction builtInStandardAttributes(parameters = {}, optional = false) {\n  //builtInStandardAttributes ::= Sequence {\n  //    country-name                  CountryName OPTIONAL,\n  //    administration-domain-name    AdministrationDomainName OPTIONAL,\n  //    network-address           [0] IMPLICIT NetworkAddress OPTIONAL,\n  //    terminal-identifier       [1] IMPLICIT TerminalIdentifier OPTIONAL,\n  //    private-domain-name       [2] PrivateDomainName OPTIONAL,\n  //    organization-name         [3] IMPLICIT OrganizationName OPTIONAL,\n  //    numeric-user-identifier   [4] IMPLICIT NumericUserIdentifier OPTIONAL,\n  //    personal-name             [5] IMPLICIT PersonalName OPTIONAL,\n  //    organizational-unit-names [6] IMPLICIT OrganizationalUnitNames OPTIONAL }\n\n  /**\r\n   * @type {Object}\r\n   * @property {string} [country_name]\r\n   * @property {string} [administration_domain_name]\r\n   * @property {string} [network_address]\r\n   * @property {string} [terminal_identifier]\r\n   * @property {string} [private_domain_name]\r\n   * @property {string} [organization_name]\r\n   * @property {string} [numeric_user_identifier]\r\n   * @property {string} [personal_name]\r\n   * @property {string} [organizational_unit_names]\r\n   */\n  const names = getParametersValue(parameters, \"names\", {});\n  return new asn1js.Sequence({\n    optional,\n    value: [new asn1js.Constructed({\n      optional: true,\n      idBlock: {\n        tagClass: 2,\n        // APPLICATION-SPECIFIC\n        tagNumber: 1 // [1]\n\n      },\n      name: names.country_name || \"\",\n      value: [new asn1js.Choice({\n        value: [new asn1js.NumericString(), new asn1js.PrintableString()]\n      })]\n    }), new asn1js.Constructed({\n      optional: true,\n      idBlock: {\n        tagClass: 2,\n        // APPLICATION-SPECIFIC\n        tagNumber: 2 // [2]\n\n      },\n      name: names.administration_domain_name || \"\",\n      value: [new asn1js.Choice({\n        value: [new asn1js.NumericString(), new asn1js.PrintableString()]\n      })]\n    }), new asn1js.Primitive({\n      optional: true,\n      idBlock: {\n        tagClass: 3,\n        // CONTEXT-SPECIFIC\n        tagNumber: 0 // [0]\n\n      },\n      name: names.network_address || \"\",\n      isHexOnly: true\n    }), new asn1js.Primitive({\n      optional: true,\n      idBlock: {\n        tagClass: 3,\n        // CONTEXT-SPECIFIC\n        tagNumber: 1 // [1]\n\n      },\n      name: names.terminal_identifier || \"\",\n      isHexOnly: true\n    }), new asn1js.Constructed({\n      optional: true,\n      idBlock: {\n        tagClass: 3,\n        // CONTEXT-SPECIFIC\n        tagNumber: 2 // [2]\n\n      },\n      name: names.private_domain_name || \"\",\n      value: [new asn1js.Choice({\n        value: [new asn1js.NumericString(), new asn1js.PrintableString()]\n      })]\n    }), new asn1js.Primitive({\n      optional: true,\n      idBlock: {\n        tagClass: 3,\n        // CONTEXT-SPECIFIC\n        tagNumber: 3 // [3]\n\n      },\n      name: names.organization_name || \"\",\n      isHexOnly: true\n    }), new asn1js.Primitive({\n      optional: true,\n      name: names.numeric_user_identifier || \"\",\n      idBlock: {\n        tagClass: 3,\n        // CONTEXT-SPECIFIC\n        tagNumber: 4 // [4]\n\n      },\n      isHexOnly: true\n    }), new asn1js.Constructed({\n      optional: true,\n      name: names.personal_name || \"\",\n      idBlock: {\n        tagClass: 3,\n        // CONTEXT-SPECIFIC\n        tagNumber: 5 // [5]\n\n      },\n      value: [new asn1js.Primitive({\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 0 // [0]\n\n        },\n        isHexOnly: true\n      }), new asn1js.Primitive({\n        optional: true,\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 1 // [1]\n\n        },\n        isHexOnly: true\n      }), new asn1js.Primitive({\n        optional: true,\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 2 // [2]\n\n        },\n        isHexOnly: true\n      }), new asn1js.Primitive({\n        optional: true,\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 3 // [3]\n\n        },\n        isHexOnly: true\n      })]\n    }), new asn1js.Constructed({\n      optional: true,\n      name: names.organizational_unit_names || \"\",\n      idBlock: {\n        tagClass: 3,\n        // CONTEXT-SPECIFIC\n        tagNumber: 6 // [6]\n\n      },\n      value: [new asn1js.Repeated({\n        value: new asn1js.PrintableString()\n      })]\n    })]\n  });\n} //**************************************************************************************\n\n/**\r\n * Schema for \"builtInDomainDefinedAttributes\" of \"ORAddress\"\r\n * @param {boolean} optional\r\n * @returns {Sequence}\r\n */\n\n\nfunction builtInDomainDefinedAttributes(optional = false) {\n  return new asn1js.Sequence({\n    optional,\n    value: [new asn1js.PrintableString(), new asn1js.PrintableString()]\n  });\n} //**************************************************************************************\n\n/**\r\n * Schema for \"builtInDomainDefinedAttributes\" of \"ORAddress\"\r\n * @param {boolean} optional\r\n * @returns {Set}\r\n */\n\n\nfunction extensionAttributes(optional = false) {\n  return new asn1js.Set({\n    optional,\n    value: [new asn1js.Primitive({\n      optional: true,\n      idBlock: {\n        tagClass: 3,\n        // CONTEXT-SPECIFIC\n        tagNumber: 0 // [0]\n\n      },\n      isHexOnly: true\n    }), new asn1js.Constructed({\n      optional: true,\n      idBlock: {\n        tagClass: 3,\n        // CONTEXT-SPECIFIC\n        tagNumber: 1 // [1]\n\n      },\n      value: [new asn1js.Any()]\n    })]\n  });\n} //**************************************************************************************\n//endregion\n//**************************************************************************************\n\n/**\r\n * Class from RFC5280\r\n */\n\n\nexport default class GeneralName {\n  //**********************************************************************************\n\n  /**\r\n   * Constructor for GeneralName class\r\n   * @param {Object} [parameters={}]\r\n   * @param {Object} [parameters.schema] asn1js parsed value to initialize the class from\r\n   * @property {number} [type] value type - from a tagged value (0 for \"otherName\", 1 for \"rfc822Name\" etc.)\r\n   * @property {Object} [value] asn1js object having GeneralName value (type depends on \"type\" value)\r\n   */\n  constructor(parameters = {}) {\n    //region Internal properties of the object\n\n    /**\r\n     * @type {number}\r\n     * @desc value type - from a tagged value (0 for \"otherName\", 1 for \"rfc822Name\" etc.)\r\n     */\n    this.type = getParametersValue(parameters, \"type\", GeneralName.defaultValues(\"type\"));\n    /**\r\n     * @type {Object}\r\n     * @desc asn1js object having GeneralName value (type depends on \"type\" value)\r\n     */\n\n    this.value = getParametersValue(parameters, \"value\", GeneralName.defaultValues(\"value\")); //endregion\n    //region If input argument array contains \"schema\" for this object\n\n    if (\"schema\" in parameters) this.fromSchema(parameters.schema); //endregion\n  } //**********************************************************************************\n\n  /**\r\n   * Return default values for all class members\r\n   * @param {string} memberName String name for a class member\r\n   */\n\n\n  static defaultValues(memberName) {\n    switch (memberName) {\n      case \"type\":\n        return 9;\n\n      case \"value\":\n        return {};\n\n      default:\n        throw new Error(`Invalid member name for GeneralName class: ${memberName}`);\n    }\n  } //**********************************************************************************\n\n  /**\r\n   * Compare values with default values for all class members\r\n   * @param {string} memberName String name for a class member\r\n   * @param {*} memberValue Value to compare with default value\r\n   */\n\n\n  static compareWithDefault(memberName, memberValue) {\n    switch (memberName) {\n      case \"type\":\n        return memberValue === GeneralName.defaultValues(memberName);\n\n      case \"value\":\n        return Object.keys(memberValue).length === 0;\n\n      default:\n        throw new Error(`Invalid member name for GeneralName class: ${memberName}`);\n    }\n  } //**********************************************************************************\n\n  /**\r\n   * Return value of pre-defined ASN.1 schema for current class\r\n   *\r\n   * ASN.1 schema:\r\n   * ```asn1\r\n   * GeneralName ::= Choice {\r\n   *    otherName                       [0]     OtherName,\r\n   *    rfc822Name                      [1]     IA5String,\r\n   *    dNSName                         [2]     IA5String,\r\n   *    x400Address                     [3]     ORAddress,\r\n   *    directoryName                   [4]     value,\r\n   *    ediPartyName                    [5]     EDIPartyName,\r\n   *    uniformResourceIdentifier       [6]     IA5String,\r\n   *    iPAddress                       [7]     OCTET STRING,\r\n   *    registeredID                    [8]     OBJECT IDENTIFIER }\r\n   * ```\r\n   *\r\n   * @param {Object} parameters Input parameters for the schema\r\n   * @returns {Object} asn1js schema object\r\n   */\n\n\n  static schema(parameters = {}) {\n    /**\r\n     * @type {Object}\r\n     * @property {string} [blockName]\r\n     * @property {Object} [directoryName]\r\n     * @property {Object} [builtInStandardAttributes]\r\n     */\n    const names = getParametersValue(parameters, \"names\", {});\n    return new asn1js.Choice({\n      value: [new asn1js.Constructed({\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 0 // [0]\n\n        },\n        name: names.blockName || \"\",\n        value: [new asn1js.ObjectIdentifier(), new asn1js.Constructed({\n          idBlock: {\n            tagClass: 3,\n            // CONTEXT-SPECIFIC\n            tagNumber: 0 // [0]\n\n          },\n          value: [new asn1js.Any()]\n        })]\n      }), new asn1js.Primitive({\n        name: names.blockName || \"\",\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 1 // [1]\n\n        }\n      }), new asn1js.Primitive({\n        name: names.blockName || \"\",\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 2 // [2]\n\n        }\n      }), new asn1js.Constructed({\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 3 // [3]\n\n        },\n        name: names.blockName || \"\",\n        value: [builtInStandardAttributes(names.builtInStandardAttributes || {}, false), builtInDomainDefinedAttributes(true), extensionAttributes(true)]\n      }), new asn1js.Constructed({\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 4 // [4]\n\n        },\n        name: names.blockName || \"\",\n        value: [RelativeDistinguishedNames.schema(names.directoryName || {})]\n      }), new asn1js.Constructed({\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 5 // [5]\n\n        },\n        name: names.blockName || \"\",\n        value: [new asn1js.Constructed({\n          optional: true,\n          idBlock: {\n            tagClass: 3,\n            // CONTEXT-SPECIFIC\n            tagNumber: 0 // [0]\n\n          },\n          value: [new asn1js.Choice({\n            value: [new asn1js.TeletexString(), new asn1js.PrintableString(), new asn1js.UniversalString(), new asn1js.Utf8String(), new asn1js.BmpString()]\n          })]\n        }), new asn1js.Constructed({\n          idBlock: {\n            tagClass: 3,\n            // CONTEXT-SPECIFIC\n            tagNumber: 1 // [1]\n\n          },\n          value: [new asn1js.Choice({\n            value: [new asn1js.TeletexString(), new asn1js.PrintableString(), new asn1js.UniversalString(), new asn1js.Utf8String(), new asn1js.BmpString()]\n          })]\n        })]\n      }), new asn1js.Primitive({\n        name: names.blockName || \"\",\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 6 // [6]\n\n        }\n      }), new asn1js.Primitive({\n        name: names.blockName || \"\",\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 7 // [7]\n\n        }\n      }), new asn1js.Primitive({\n        name: names.blockName || \"\",\n        idBlock: {\n          tagClass: 3,\n          // CONTEXT-SPECIFIC\n          tagNumber: 8 // [8]\n\n        }\n      })]\n    });\n  } //**********************************************************************************\n\n  /**\r\n   * Convert parsed asn1js object into current class\r\n   * @param {!Object} schema\r\n   */\n\n\n  fromSchema(schema) {\n    //region Clear input data first\n    clearProps(schema, [\"blockName\", \"otherName\", \"rfc822Name\", \"dNSName\", \"x400Address\", \"directoryName\", \"ediPartyName\", \"uniformResourceIdentifier\", \"iPAddress\", \"registeredID\"]); //endregion\n    //region Check the schema is valid\n\n    const asn1 = asn1js.compareSchema(schema, schema, GeneralName.schema({\n      names: {\n        blockName: \"blockName\",\n        otherName: \"otherName\",\n        rfc822Name: \"rfc822Name\",\n        dNSName: \"dNSName\",\n        x400Address: \"x400Address\",\n        directoryName: {\n          names: {\n            blockName: \"directoryName\"\n          }\n        },\n        ediPartyName: \"ediPartyName\",\n        uniformResourceIdentifier: \"uniformResourceIdentifier\",\n        iPAddress: \"iPAddress\",\n        registeredID: \"registeredID\"\n      }\n    }));\n    if (asn1.verified === false) throw new Error(\"Object's schema was not verified against input data for GeneralName\"); //endregion\n    //region Get internal properties from parsed schema\n\n    this.type = asn1.result.blockName.idBlock.tagNumber;\n\n    switch (this.type) {\n      case 0:\n        // otherName\n        this.value = asn1.result.blockName;\n        break;\n\n      case 1: // rfc822Name + dNSName + uniformResourceIdentifier\n\n      case 2:\n      case 6:\n        {\n          const value = asn1.result.blockName;\n          value.idBlock.tagClass = 1; // UNIVERSAL\n\n          value.idBlock.tagNumber = 22; // IA5STRING\n\n          const valueBER = value.toBER(false);\n          this.value = asn1js.fromBER(valueBER).result.valueBlock.value;\n        }\n        break;\n\n      case 3:\n        // x400Address\n        this.value = asn1.result.blockName;\n        break;\n\n      case 4:\n        // directoryName\n        this.value = new RelativeDistinguishedNames({\n          schema: asn1.result.directoryName\n        });\n        break;\n\n      case 5:\n        // ediPartyName\n        this.value = asn1.result.ediPartyName;\n        break;\n\n      case 7:\n        // iPAddress\n        this.value = new asn1js.OctetString({\n          valueHex: asn1.result.blockName.valueBlock.valueHex\n        });\n        break;\n\n      case 8:\n        // registeredID\n        {\n          const value = asn1.result.blockName;\n          value.idBlock.tagClass = 1; // UNIVERSAL\n\n          value.idBlock.tagNumber = 6; // ObjectIdentifier\n\n          const valueBER = value.toBER(false);\n          this.value = asn1js.fromBER(valueBER).result.valueBlock.toString(); // Getting a string representation of the ObjectIdentifier\n        }\n        break;\n\n      default:\n    } //endregion\n\n  } //**********************************************************************************\n\n  /**\r\n   * Convert current object to asn1js object and set correct values\r\n   * @returns {Object} asn1js object\r\n   */\n\n\n  toSchema() {\n    //region Construct and return new ASN.1 schema for this object\n    switch (this.type) {\n      case 0:\n      case 3:\n      case 5:\n        return new asn1js.Constructed({\n          idBlock: {\n            tagClass: 3,\n            // CONTEXT-SPECIFIC\n            tagNumber: this.type\n          },\n          value: [this.value]\n        });\n\n      case 1:\n      case 2:\n      case 6:\n        {\n          const value = new asn1js.IA5String({\n            value: this.value\n          });\n          value.idBlock.tagClass = 3;\n          value.idBlock.tagNumber = this.type;\n          return value;\n        }\n\n      case 4:\n        return new asn1js.Constructed({\n          idBlock: {\n            tagClass: 3,\n            // CONTEXT-SPECIFIC\n            tagNumber: 4\n          },\n          value: [this.value.toSchema()]\n        });\n\n      case 7:\n        {\n          const value = this.value;\n          value.idBlock.tagClass = 3;\n          value.idBlock.tagNumber = this.type;\n          return value;\n        }\n\n      case 8:\n        {\n          const value = new asn1js.ObjectIdentifier({\n            value: this.value\n          });\n          value.idBlock.tagClass = 3;\n          value.idBlock.tagNumber = this.type;\n          return value;\n        }\n\n      default:\n        return GeneralName.schema();\n    } //endregion\n\n  } //**********************************************************************************\n\n  /**\r\n   * Convertion for the class to JSON object\r\n   * @returns {Object}\r\n   */\n\n\n  toJSON() {\n    const _object = {\n      type: this.type,\n      value: \"\"\n    };\n    if (typeof this.value === \"string\") _object.value = this.value;else {\n      try {\n        _object.value = this.value.toJSON();\n      } catch (ex) {}\n    }\n    return _object;\n  } //**********************************************************************************\n\n\n} //**************************************************************************************","map":{"version":3,"sources":["/Users/pratison/Work/Cisco/Education/React/education-webex/node_modules/pkijs/src/GeneralName.js"],"names":["asn1js","getParametersValue","clearProps","RelativeDistinguishedNames","builtInStandardAttributes","parameters","optional","names","Sequence","value","Constructed","idBlock","tagClass","tagNumber","name","country_name","Choice","NumericString","PrintableString","administration_domain_name","Primitive","network_address","isHexOnly","terminal_identifier","private_domain_name","organization_name","numeric_user_identifier","personal_name","organizational_unit_names","Repeated","builtInDomainDefinedAttributes","extensionAttributes","Set","Any","GeneralName","constructor","type","defaultValues","fromSchema","schema","memberName","Error","compareWithDefault","memberValue","Object","keys","length","blockName","ObjectIdentifier","directoryName","TeletexString","UniversalString","Utf8String","BmpString","asn1","compareSchema","otherName","rfc822Name","dNSName","x400Address","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID","verified","result","valueBER","toBER","fromBER","valueBlock","OctetString","valueHex","toString","toSchema","IA5String","toJSON","_object","ex"],"mappings":"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","sourcesContent":["import * as asn1js from \"asn1js\";\r\nimport { getParametersValue, clearProps } from \"pvutils\";\r\nimport RelativeDistinguishedNames from \"./RelativeDistinguishedNames.js\";\r\n//**************************************************************************************\r\n//region Additional asn1js schema elements existing inside GeneralName schema\r\n//**************************************************************************************\r\n/**\r\n * Schema for \"builtInStandardAttributes\" of \"ORAddress\"\r\n * @param {Object} parameters\r\n * @property {Object} [names]\r\n * @param {boolean} optional\r\n * @returns {Sequence}\r\n */\r\nfunction builtInStandardAttributes(parameters = {}, optional = false)\r\n{\r\n\t//builtInStandardAttributes ::= Sequence {\r\n\t//    country-name                  CountryName OPTIONAL,\r\n\t//    administration-domain-name    AdministrationDomainName OPTIONAL,\r\n\t//    network-address           [0] IMPLICIT NetworkAddress OPTIONAL,\r\n\t//    terminal-identifier       [1] IMPLICIT TerminalIdentifier OPTIONAL,\r\n\t//    private-domain-name       [2] PrivateDomainName OPTIONAL,\r\n\t//    organization-name         [3] IMPLICIT OrganizationName OPTIONAL,\r\n\t//    numeric-user-identifier   [4] IMPLICIT NumericUserIdentifier OPTIONAL,\r\n\t//    personal-name             [5] IMPLICIT PersonalName OPTIONAL,\r\n\t//    organizational-unit-names [6] IMPLICIT OrganizationalUnitNames OPTIONAL }\r\n\r\n\t/**\r\n\t * @type {Object}\r\n\t * @property {string} [country_name]\r\n\t * @property {string} [administration_domain_name]\r\n\t * @property {string} [network_address]\r\n\t * @property {string} [terminal_identifier]\r\n\t * @property {string} [private_domain_name]\r\n\t * @property {string} [organization_name]\r\n\t * @property {string} [numeric_user_identifier]\r\n\t * @property {string} [personal_name]\r\n\t * @property {string} [organizational_unit_names]\r\n\t */\r\n\tconst names = getParametersValue(parameters, \"names\", {});\r\n\r\n\treturn (new asn1js.Sequence({\r\n\t\toptional,\r\n\t\tvalue: [\r\n\t\t\tnew asn1js.Constructed({\r\n\t\t\t\toptional: true,\r\n\t\t\t\tidBlock: {\r\n\t\t\t\t\ttagClass: 2, // APPLICATION-SPECIFIC\r\n\t\t\t\t\ttagNumber: 1 // [1]\r\n\t\t\t\t},\r\n\t\t\t\tname: (names.country_name || \"\"),\r\n\t\t\t\tvalue: [\r\n\t\t\t\t\tnew asn1js.Choice({\r\n\t\t\t\t\t\tvalue: [\r\n\t\t\t\t\t\t\tnew asn1js.NumericString(),\r\n\t\t\t\t\t\t\tnew asn1js.PrintableString()\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t}),\r\n\t\t\tnew asn1js.Constructed({\r\n\t\t\t\toptional: true,\r\n\t\t\t\tidBlock: {\r\n\t\t\t\t\ttagClass: 2, // APPLICATION-SPECIFIC\r\n\t\t\t\t\ttagNumber: 2 // [2]\r\n\t\t\t\t},\r\n\t\t\t\tname: (names.administration_domain_name || \"\"),\r\n\t\t\t\tvalue: [\r\n\t\t\t\t\tnew asn1js.Choice({\r\n\t\t\t\t\t\tvalue: [\r\n\t\t\t\t\t\t\tnew asn1js.NumericString(),\r\n\t\t\t\t\t\t\tnew asn1js.PrintableString()\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t}),\r\n\t\t\tnew asn1js.Primitive({\r\n\t\t\t\toptional: true,\r\n\t\t\t\tidBlock: {\r\n\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\ttagNumber: 0 // [0]\r\n\t\t\t\t},\r\n\t\t\t\tname: (names.network_address || \"\"),\r\n\t\t\t\tisHexOnly: true\r\n\t\t\t}),\r\n\t\t\tnew asn1js.Primitive({\r\n\t\t\t\toptional: true,\r\n\t\t\t\tidBlock: {\r\n\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\ttagNumber: 1 // [1]\r\n\t\t\t\t},\r\n\t\t\t\tname: (names.terminal_identifier || \"\"),\r\n\t\t\t\tisHexOnly: true\r\n\t\t\t}),\r\n\t\t\tnew asn1js.Constructed({\r\n\t\t\t\toptional: true,\r\n\t\t\t\tidBlock: {\r\n\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\ttagNumber: 2 // [2]\r\n\t\t\t\t},\r\n\t\t\t\tname: (names.private_domain_name || \"\"),\r\n\t\t\t\tvalue: [\r\n\t\t\t\t\tnew asn1js.Choice({\r\n\t\t\t\t\t\tvalue: [\r\n\t\t\t\t\t\t\tnew asn1js.NumericString(),\r\n\t\t\t\t\t\t\tnew asn1js.PrintableString()\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t}),\r\n\t\t\tnew asn1js.Primitive({\r\n\t\t\t\toptional: true,\r\n\t\t\t\tidBlock: {\r\n\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\ttagNumber: 3 // [3]\r\n\t\t\t\t},\r\n\t\t\t\tname: (names.organization_name || \"\"),\r\n\t\t\t\tisHexOnly: true\r\n\t\t\t}),\r\n\t\t\tnew asn1js.Primitive({\r\n\t\t\t\toptional: true,\r\n\t\t\t\tname: (names.numeric_user_identifier || \"\"),\r\n\t\t\t\tidBlock: {\r\n\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\ttagNumber: 4 // [4]\r\n\t\t\t\t},\r\n\t\t\t\tisHexOnly: true\r\n\t\t\t}),\r\n\t\t\tnew asn1js.Constructed({\r\n\t\t\t\toptional: true,\r\n\t\t\t\tname: (names.personal_name || \"\"),\r\n\t\t\t\tidBlock: {\r\n\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\ttagNumber: 5 // [5]\r\n\t\t\t\t},\r\n\t\t\t\tvalue: [\r\n\t\t\t\t\tnew asn1js.Primitive({\r\n\t\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\t\ttagNumber: 0 // [0]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tisHexOnly: true\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew asn1js.Primitive({\r\n\t\t\t\t\t\toptional: true,\r\n\t\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\t\ttagNumber: 1 // [1]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tisHexOnly: true\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew asn1js.Primitive({\r\n\t\t\t\t\t\toptional: true,\r\n\t\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\t\ttagNumber: 2 // [2]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tisHexOnly: true\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew asn1js.Primitive({\r\n\t\t\t\t\t\toptional: true,\r\n\t\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\t\ttagNumber: 3 // [3]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tisHexOnly: true\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t}),\r\n\t\t\tnew asn1js.Constructed({\r\n\t\t\t\toptional: true,\r\n\t\t\t\tname: (names.organizational_unit_names || \"\"),\r\n\t\t\t\tidBlock: {\r\n\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\ttagNumber: 6 // [6]\r\n\t\t\t\t},\r\n\t\t\t\tvalue: [\r\n\t\t\t\t\tnew asn1js.Repeated({\r\n\t\t\t\t\t\tvalue: new asn1js.PrintableString()\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t})\r\n\t\t]\r\n\t}));\r\n}\r\n//**************************************************************************************\r\n/**\r\n * Schema for \"builtInDomainDefinedAttributes\" of \"ORAddress\"\r\n * @param {boolean} optional\r\n * @returns {Sequence}\r\n */\r\nfunction builtInDomainDefinedAttributes(optional = false)\r\n{\r\n\treturn (new asn1js.Sequence({\r\n\t\toptional,\r\n\t\tvalue: [\r\n\t\t\tnew asn1js.PrintableString(),\r\n\t\t\tnew asn1js.PrintableString()\r\n\t\t]\r\n\t}));\r\n}\r\n//**************************************************************************************\r\n/**\r\n * Schema for \"builtInDomainDefinedAttributes\" of \"ORAddress\"\r\n * @param {boolean} optional\r\n * @returns {Set}\r\n */\r\nfunction extensionAttributes(optional = false)\r\n{\r\n\treturn (new asn1js.Set({\r\n\t\toptional,\r\n\t\tvalue: [\r\n\t\t\tnew asn1js.Primitive({\r\n\t\t\t\toptional: true,\r\n\t\t\t\tidBlock: {\r\n\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\ttagNumber: 0 // [0]\r\n\t\t\t\t},\r\n\t\t\t\tisHexOnly: true\r\n\t\t\t}),\r\n\t\t\tnew asn1js.Constructed({\r\n\t\t\t\toptional: true,\r\n\t\t\t\tidBlock: {\r\n\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\ttagNumber: 1 // [1]\r\n\t\t\t\t},\r\n\t\t\t\tvalue: [new asn1js.Any()]\r\n\t\t\t})\r\n\t\t]\r\n\t}));\r\n}\r\n//**************************************************************************************\r\n//endregion\r\n//**************************************************************************************\r\n/**\r\n * Class from RFC5280\r\n */\r\nexport default class GeneralName\r\n{\r\n\t//**********************************************************************************\r\n\t/**\r\n\t * Constructor for GeneralName class\r\n\t * @param {Object} [parameters={}]\r\n\t * @param {Object} [parameters.schema] asn1js parsed value to initialize the class from\r\n\t * @property {number} [type] value type - from a tagged value (0 for \"otherName\", 1 for \"rfc822Name\" etc.)\r\n\t * @property {Object} [value] asn1js object having GeneralName value (type depends on \"type\" value)\r\n\t */\r\n\tconstructor(parameters = {})\r\n\t{\r\n\t\t//region Internal properties of the object\r\n\t\t/**\r\n\t\t * @type {number}\r\n\t\t * @desc value type - from a tagged value (0 for \"otherName\", 1 for \"rfc822Name\" etc.)\r\n\t\t */\r\n\t\tthis.type = getParametersValue(parameters, \"type\", GeneralName.defaultValues(\"type\"));\r\n\t\t/**\r\n\t\t * @type {Object}\r\n\t\t * @desc asn1js object having GeneralName value (type depends on \"type\" value)\r\n\t\t */\r\n\t\tthis.value = getParametersValue(parameters, \"value\", GeneralName.defaultValues(\"value\"));\r\n\t\t//endregion\r\n\r\n\t\t//region If input argument array contains \"schema\" for this object\r\n\t\tif(\"schema\" in parameters)\r\n\t\t\tthis.fromSchema(parameters.schema);\r\n\t\t//endregion\r\n\t}\r\n\t//**********************************************************************************\r\n\t/**\r\n\t * Return default values for all class members\r\n\t * @param {string} memberName String name for a class member\r\n\t */\r\n\tstatic defaultValues(memberName)\r\n\t{\r\n\t\tswitch(memberName)\r\n\t\t{\r\n\t\t\tcase \"type\":\r\n\t\t\t\treturn 9;\r\n\t\t\tcase \"value\":\r\n\t\t\t\treturn {};\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Invalid member name for GeneralName class: ${memberName}`);\r\n\t\t}\r\n\t}\r\n\t//**********************************************************************************\r\n\t/**\r\n\t * Compare values with default values for all class members\r\n\t * @param {string} memberName String name for a class member\r\n\t * @param {*} memberValue Value to compare with default value\r\n\t */\r\n\tstatic compareWithDefault(memberName, memberValue)\r\n\t{\r\n\t\tswitch(memberName)\r\n\t\t{\r\n\t\t\tcase \"type\":\r\n\t\t\t\treturn (memberValue === GeneralName.defaultValues(memberName));\r\n\t\t\tcase \"value\":\r\n\t\t\t\treturn (Object.keys(memberValue).length === 0);\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Invalid member name for GeneralName class: ${memberName}`);\r\n\t\t}\r\n\t}\r\n\t//**********************************************************************************\r\n\t/**\r\n\t * Return value of pre-defined ASN.1 schema for current class\r\n\t *\r\n\t * ASN.1 schema:\r\n\t * ```asn1\r\n\t * GeneralName ::= Choice {\r\n\t *    otherName                       [0]     OtherName,\r\n\t *    rfc822Name                      [1]     IA5String,\r\n\t *    dNSName                         [2]     IA5String,\r\n\t *    x400Address                     [3]     ORAddress,\r\n\t *    directoryName                   [4]     value,\r\n\t *    ediPartyName                    [5]     EDIPartyName,\r\n\t *    uniformResourceIdentifier       [6]     IA5String,\r\n\t *    iPAddress                       [7]     OCTET STRING,\r\n\t *    registeredID                    [8]     OBJECT IDENTIFIER }\r\n\t * ```\r\n\t *\r\n\t * @param {Object} parameters Input parameters for the schema\r\n\t * @returns {Object} asn1js schema object\r\n\t */\r\n\tstatic schema(parameters = {})\r\n\t{\r\n\t\t/**\r\n\t\t * @type {Object}\r\n\t\t * @property {string} [blockName]\r\n\t\t * @property {Object} [directoryName]\r\n\t\t * @property {Object} [builtInStandardAttributes]\r\n\t\t */\r\n\t\tconst names = getParametersValue(parameters, \"names\", {});\r\n\r\n\t\treturn (new asn1js.Choice({\r\n\t\t\tvalue: [\r\n\t\t\t\tnew asn1js.Constructed({\r\n\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\ttagNumber: 0 // [0]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tname: (names.blockName || \"\"),\r\n\t\t\t\t\tvalue: [\r\n\t\t\t\t\t\tnew asn1js.ObjectIdentifier(),\r\n\t\t\t\t\t\tnew asn1js.Constructed({\r\n\t\t\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\t\t\ttagNumber: 0 // [0]\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tvalue: [new asn1js.Any()]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t]\r\n\t\t\t\t}),\r\n\t\t\t\tnew asn1js.Primitive({\r\n\t\t\t\t\tname: (names.blockName || \"\"),\r\n\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\ttagNumber: 1 // [1]\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tnew asn1js.Primitive({\r\n\t\t\t\t\tname: (names.blockName || \"\"),\r\n\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\ttagNumber: 2 // [2]\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tnew asn1js.Constructed({\r\n\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\ttagNumber: 3 // [3]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tname: (names.blockName || \"\"),\r\n\t\t\t\t\tvalue: [\r\n\t\t\t\t\t\tbuiltInStandardAttributes((names.builtInStandardAttributes || {}), false),\r\n\t\t\t\t\t\tbuiltInDomainDefinedAttributes(true),\r\n\t\t\t\t\t\textensionAttributes(true)\r\n\t\t\t\t\t]\r\n\t\t\t\t}),\r\n\t\t\t\tnew asn1js.Constructed({\r\n\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\ttagNumber: 4 // [4]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tname: (names.blockName || \"\"),\r\n\t\t\t\t\tvalue: [RelativeDistinguishedNames.schema(names.directoryName || {})]\r\n\t\t\t\t}),\r\n\t\t\t\tnew asn1js.Constructed({\r\n\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\ttagNumber: 5 // [5]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tname: (names.blockName || \"\"),\r\n\t\t\t\t\tvalue: [\r\n\t\t\t\t\t\tnew asn1js.Constructed({\r\n\t\t\t\t\t\t\toptional: true,\r\n\t\t\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\t\t\ttagNumber: 0 // [0]\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tvalue: [\r\n\t\t\t\t\t\t\t\tnew asn1js.Choice({\r\n\t\t\t\t\t\t\t\t\tvalue: [\r\n\t\t\t\t\t\t\t\t\t\tnew asn1js.TeletexString(),\r\n\t\t\t\t\t\t\t\t\t\tnew asn1js.PrintableString(),\r\n\t\t\t\t\t\t\t\t\t\tnew asn1js.UniversalString(),\r\n\t\t\t\t\t\t\t\t\t\tnew asn1js.Utf8String(),\r\n\t\t\t\t\t\t\t\t\t\tnew asn1js.BmpString()\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tnew asn1js.Constructed({\r\n\t\t\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\t\t\ttagNumber: 1 // [1]\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tvalue: [\r\n\t\t\t\t\t\t\t\tnew asn1js.Choice({\r\n\t\t\t\t\t\t\t\t\tvalue: [\r\n\t\t\t\t\t\t\t\t\t\tnew asn1js.TeletexString(),\r\n\t\t\t\t\t\t\t\t\t\tnew asn1js.PrintableString(),\r\n\t\t\t\t\t\t\t\t\t\tnew asn1js.UniversalString(),\r\n\t\t\t\t\t\t\t\t\t\tnew asn1js.Utf8String(),\r\n\t\t\t\t\t\t\t\t\t\tnew asn1js.BmpString()\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t]\r\n\t\t\t\t}),\r\n\t\t\t\tnew asn1js.Primitive({\r\n\t\t\t\t\tname: (names.blockName || \"\"),\r\n\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\ttagNumber: 6 // [6]\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tnew asn1js.Primitive({\r\n\t\t\t\t\tname: (names.blockName || \"\"),\r\n\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\ttagNumber: 7 // [7]\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tnew asn1js.Primitive({\r\n\t\t\t\t\tname: (names.blockName || \"\"),\r\n\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\ttagNumber: 8 // [8]\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t]\r\n\t\t}));\r\n\t}\r\n\t//**********************************************************************************\r\n\t/**\r\n\t * Convert parsed asn1js object into current class\r\n\t * @param {!Object} schema\r\n\t */\r\n\tfromSchema(schema)\r\n\t{\r\n\t\t//region Clear input data first\r\n\t\tclearProps(schema, [\r\n\t\t\t\"blockName\",\r\n\t\t\t\"otherName\",\r\n\t\t\t\"rfc822Name\",\r\n\t\t\t\"dNSName\",\r\n\t\t\t\"x400Address\",\r\n\t\t\t\"directoryName\",\r\n\t\t\t\"ediPartyName\",\r\n\t\t\t\"uniformResourceIdentifier\",\r\n\t\t\t\"iPAddress\",\r\n\t\t\t\"registeredID\"\r\n\t\t]);\r\n\t\t//endregion\r\n\t\t\r\n\t\t//region Check the schema is valid\r\n\t\tconst asn1 = asn1js.compareSchema(schema,\r\n\t\t\tschema,\r\n\t\t\tGeneralName.schema({\r\n\t\t\t\tnames: {\r\n\t\t\t\t\tblockName: \"blockName\",\r\n\t\t\t\t\totherName: \"otherName\",\r\n\t\t\t\t\trfc822Name: \"rfc822Name\",\r\n\t\t\t\t\tdNSName: \"dNSName\",\r\n\t\t\t\t\tx400Address: \"x400Address\",\r\n\t\t\t\t\tdirectoryName: {\r\n\t\t\t\t\t\tnames: {\r\n\t\t\t\t\t\t\tblockName: \"directoryName\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tediPartyName: \"ediPartyName\",\r\n\t\t\t\t\tuniformResourceIdentifier: \"uniformResourceIdentifier\",\r\n\t\t\t\t\tiPAddress: \"iPAddress\",\r\n\t\t\t\t\tregisteredID: \"registeredID\"\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\tif(asn1.verified === false)\r\n\t\t\tthrow new Error(\"Object's schema was not verified against input data for GeneralName\");\r\n\t\t//endregion\r\n\r\n\t\t//region Get internal properties from parsed schema\r\n\t\tthis.type = asn1.result.blockName.idBlock.tagNumber;\r\n\r\n\t\tswitch(this.type)\r\n\t\t{\r\n\t\t\tcase 0: // otherName\r\n\t\t\t\tthis.value = asn1.result.blockName;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1: // rfc822Name + dNSName + uniformResourceIdentifier\r\n\t\t\tcase 2:\r\n\t\t\tcase 6:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst value = asn1.result.blockName;\r\n\r\n\t\t\t\t\tvalue.idBlock.tagClass = 1; // UNIVERSAL\r\n\t\t\t\t\tvalue.idBlock.tagNumber = 22; // IA5STRING\r\n\r\n\t\t\t\t\tconst valueBER = value.toBER(false);\r\n\r\n\t\t\t\t\tthis.value = asn1js.fromBER(valueBER).result.valueBlock.value;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3: // x400Address\r\n\t\t\t\tthis.value = asn1.result.blockName;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4: // directoryName\r\n\t\t\t\tthis.value = new RelativeDistinguishedNames({ schema: asn1.result.directoryName });\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5: // ediPartyName\r\n\t\t\t\tthis.value = asn1.result.ediPartyName;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 7: // iPAddress\r\n\t\t\t\tthis.value = new asn1js.OctetString({ valueHex: asn1.result.blockName.valueBlock.valueHex });\r\n\t\t\t\tbreak;\r\n\t\t\tcase 8: // registeredID\r\n\t\t\t\t{\r\n\t\t\t\t\tconst value = asn1.result.blockName;\r\n\r\n\t\t\t\t\tvalue.idBlock.tagClass = 1; // UNIVERSAL\r\n\t\t\t\t\tvalue.idBlock.tagNumber = 6; // ObjectIdentifier\r\n\r\n\t\t\t\t\tconst valueBER = value.toBER(false);\r\n\r\n\t\t\t\t\tthis.value = asn1js.fromBER(valueBER).result.valueBlock.toString(); // Getting a string representation of the ObjectIdentifier\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t}\r\n\t\t//endregion\r\n\t}\r\n\t//**********************************************************************************\r\n\t/**\r\n\t * Convert current object to asn1js object and set correct values\r\n\t * @returns {Object} asn1js object\r\n\t */\r\n\ttoSchema()\r\n\t{\r\n\t\t//region Construct and return new ASN.1 schema for this object\r\n\t\tswitch(this.type)\r\n\t\t{\r\n\t\t\tcase 0:\r\n\t\t\tcase 3:\r\n\t\t\tcase 5:\r\n\t\t\t\treturn new asn1js.Constructed({\r\n\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\ttagNumber: this.type\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalue: [\r\n\t\t\t\t\t\tthis.value\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t\tcase 1:\r\n\t\t\tcase 2:\r\n\t\t\tcase 6:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst value = new asn1js.IA5String({ value: this.value });\r\n\r\n\t\t\t\t\tvalue.idBlock.tagClass = 3;\r\n\t\t\t\t\tvalue.idBlock.tagNumber = this.type;\r\n\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\t\t\tcase 4:\r\n\t\t\t\treturn new asn1js.Constructed({\r\n\t\t\t\t\tidBlock: {\r\n\t\t\t\t\t\ttagClass: 3, // CONTEXT-SPECIFIC\r\n\t\t\t\t\t\ttagNumber: 4\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalue: [this.value.toSchema()]\r\n\t\t\t\t});\r\n\t\t\tcase 7:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst value = this.value;\r\n\r\n\t\t\t\t\tvalue.idBlock.tagClass = 3;\r\n\t\t\t\t\tvalue.idBlock.tagNumber = this.type;\r\n\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\t\t\tcase 8:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst value = new asn1js.ObjectIdentifier({ value: this.value });\r\n\r\n\t\t\t\t\tvalue.idBlock.tagClass = 3;\r\n\t\t\t\t\tvalue.idBlock.tagNumber = this.type;\r\n\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\treturn GeneralName.schema();\r\n\t\t}\r\n\t\t//endregion\r\n\t}\r\n\t//**********************************************************************************\r\n\t/**\r\n\t * Convertion for the class to JSON object\r\n\t * @returns {Object}\r\n\t */\r\n\ttoJSON()\r\n\t{\r\n\t\tconst _object = {\r\n\t\t\ttype: this.type,\r\n\t\t\tvalue: \"\"\r\n\t\t};\r\n\r\n\t\tif((typeof this.value) === \"string\")\r\n\t\t\t_object.value = this.value;\r\n\t\telse\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\t_object.value = this.value.toJSON();\r\n\t\t\t}\r\n\t\t\tcatch(ex){}\r\n\t\t}\r\n\r\n\t\treturn _object;\r\n\t}\r\n\t//**********************************************************************************\r\n}\r\n//**************************************************************************************\r\n"]},"metadata":{},"sourceType":"module"}