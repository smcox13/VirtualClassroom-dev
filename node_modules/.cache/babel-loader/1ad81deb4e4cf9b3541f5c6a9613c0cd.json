{"ast":null,"code":"var _jsxFileName = \"/Users/pratison/Work/Cisco/Education/React/education-webex/src/pages/Login.js\";\nimport React from 'react';\nimport Webex from 'webex';\nconst API_URL = 'https://petee.pegatsdemo.com/prweb/PRRestService/';\nconst CLIENT_ID = '66093965612664527753';\nconst CLIENT_SECRET = '32FD9134A62CAEEF681F3E07FBF2A5C7';\nexport function requestAccessToken() {\n  const authInfo = `grant_type=client_credentials&client_id=${CLIENT_ID}&client_secret=${CLIENT_SECRET}`;\n  return fetch(`${API_URL}oauth2/v1/token`, {\n    method: 'POST',\n    headers: new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }),\n    body: authInfo\n  }).then(response => response.json()).then(response => sessionStorage.setItem('access_token', response.access_token)); // in your case set state to returned token\n}\n/*\nexport const InitWebex = async (accessToken) => {\n  const credentials = {\n    client_id: config.sdk.credentials.client_id,\n    redirect_uri: config.sdk.credentials.redirect_uri,\n    scope: config.sdk.credentials.scope,\n    response_type: 'token',\n    idbroker: config.sdk.credentials.idbroker,\n    identity: config.sdk.credentials.identity,\n  };\n  const webex = (window.webex = Webex.init({\n    config: {\n      credentials,\n      meetings: {\n        deviceType: 'WEB',\n      },\n      services: config.sdk.services,\n      idbroker_url: config.idbroker_url,\n    },\n    // This credentials is used to pass generated access token to the guest meeting connection\n    credentials: {access_token: accessToken},\n  }));\n\n  return webex;\n};\n*/\n\nconst webex = window.webex = Webex.init({\n  config: {\n    credentials: {\n      client_id: 'C190e9a362204470aa77adb388e66e78ca175ac471e215ce269540297660be61e',\n      redirect_uri: 'http://localhost:3000/addClasses',\n      scope: 'spark:all spark:kms'\n    }\n  }\n});\nconst token = RegExp('[#&]' + 'access_token' + '=([^&]*)').exec(window.location.hash); // console.log(token);\n\n/*\nconst webex = window.webex = Webex.init({\n  config: {\n    credentials: {\n      authorizationString: 'https://webexapis.com/v1/authorize?client_id=C190e9a362204470aa77adb388e66e78ca175ac471e215ce269540297660be61e&response_type=code&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2FaddClasses&scope=spark%3Aall%20spark%3Akms&state=set_state_here',\n      clientType: 'confidential',\n  },\n    }\n});\n*/\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mail: props.location.mail\n    };\n  }\n\n  componentDidMount() {\n    requestAccessToken();\n    console.log(sessionStorage.getItem('access_token'));\n\n    if (this.props.location.shouldLogin === 'login') {// webex.authorization.initiateLogin();\n    }\n\n    if (this.props.location.shouldLogin === 'logout') {\n      window.sessionStorage.removeItem('accessToken');\n      webex.logout();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, this.state.loggedIn ? \"Redirecting...\" : \"Loading...\"));\n  }\n\n}\n\nexport default Login;\n/*\n\n*/","map":{"version":3,"sources":["/Users/pratison/Work/Cisco/Education/React/education-webex/src/pages/Login.js"],"names":["React","Webex","API_URL","CLIENT_ID","CLIENT_SECRET","requestAccessToken","authInfo","fetch","method","headers","Headers","body","then","response","json","sessionStorage","setItem","access_token","webex","window","init","config","credentials","client_id","redirect_uri","scope","token","RegExp","exec","location","hash","Login","Component","constructor","props","state","mail","componentDidMount","console","log","getItem","shouldLogin","removeItem","logout","render","loggedIn"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,MAAMC,OAAO,GAAG,mDAAhB;AACA,MAAMC,SAAS,GAAG,sBAAlB;AACA,MAAMC,aAAa,GAAG,kCAAtB;AAEA,OAAO,SAASC,kBAAT,GAA8B;AACnC,QAAMC,QAAQ,GAAI,2CAA0CH,SAAU,kBAAiBC,aAAc,EAArG;AACA,SAAOG,KAAK,CAAE,GAAEL,OAAQ,iBAAZ,EAA8B;AACxCM,IAAAA,MAAM,EAAE,MADgC;AAExCC,IAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACnB,sBAAgB;AADG,KAAZ,CAF+B;AAKxCC,IAAAA,IAAI,EAAEL;AALkC,GAA9B,CAAL,CAONM,IAPM,CAODC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAPX,EAQNF,IARM,CAQDC,QAAQ,IAAIE,cAAc,CAACC,OAAf,CAAuB,cAAvB,EAAsCH,QAAQ,CAACI,YAA/C,CARX,CAAP,CAFmC,CAWjC;AACH;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,MAAMC,KAAK,GAAGC,MAAM,CAACD,KAAP,GAAejB,KAAK,CAACmB,IAAN,CAAW;AACtCC,EAAAA,MAAM,EAAE;AACNC,IAAAA,WAAW,EAAE;AACXC,MAAAA,SAAS,EAAE,mEADA;AAEXC,MAAAA,YAAY,EAAE,kCAFH;AAGXC,MAAAA,KAAK,EAAE;AAHI;AADP;AAD8B,CAAX,CAA7B;AASA,MAAMC,KAAK,GAAGC,MAAM,CAAC,SAAS,cAAT,GAA0B,UAA3B,CAAN,CAA6CC,IAA7C,CAAkDT,MAAM,CAACU,QAAP,CAAgBC,IAAlE,CAAd,C,CACA;;AACA;;;;;;;;;;;AAUA,MAAMC,KAAN,SAAoB/B,KAAK,CAACgC,SAA1B,CAAoC;AAEhCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAEF,KAAK,CAACL,QAAN,CAAeO;AADZ,KAAb;AAGH;;AAEDC,EAAAA,iBAAiB,GAAE;AACfhC,IAAAA,kBAAkB;AAClBiC,IAAAA,OAAO,CAACC,GAAR,CAAYxB,cAAc,CAACyB,OAAf,CAAuB,cAAvB,CAAZ;;AACA,QAAI,KAAKN,KAAL,CAAWL,QAAX,CAAoBY,WAApB,KAAoC,OAAxC,EAAkD,CAC9C;AACH;;AAAC,QAAI,KAAKP,KAAL,CAAWL,QAAX,CAAoBY,WAApB,KAAoC,QAAxC,EAAmD;AACjDtB,MAAAA,MAAM,CAACJ,cAAP,CAAsB2B,UAAtB,CAAiC,aAAjC;AACAxB,MAAAA,KAAK,CAACyB,MAAN;AACH;AACJ;;AAEDC,EAAAA,MAAM,GAAG;AAEL,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKT,KAAL,CAAWU,QAAX,GAAsB,gBAAtB,GAAyC,YAA9C,CADJ,CADJ;AAKH;;AA3B+B;;AA8BpC,eAAed,KAAf;AAEA","sourcesContent":["import React from 'react';\nimport Webex from 'webex';\n\n\nconst API_URL = 'https://petee.pegatsdemo.com/prweb/PRRestService/';\nconst CLIENT_ID = '66093965612664527753';\nconst CLIENT_SECRET = '32FD9134A62CAEEF681F3E07FBF2A5C7';\n\nexport function requestAccessToken() {\n  const authInfo = `grant_type=client_credentials&client_id=${CLIENT_ID}&client_secret=${CLIENT_SECRET}`;\n  return fetch(`${API_URL}oauth2/v1/token`, {\n    method: 'POST',\n    headers: new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    }),\n    body: authInfo,\n  })\n  .then(response => response.json())\n  .then(response => sessionStorage.setItem('access_token',response.access_token));\n    // in your case set state to returned token\n}\n/*\nexport const InitWebex = async (accessToken) => {\n  const credentials = {\n    client_id: config.sdk.credentials.client_id,\n    redirect_uri: config.sdk.credentials.redirect_uri,\n    scope: config.sdk.credentials.scope,\n    response_type: 'token',\n    idbroker: config.sdk.credentials.idbroker,\n    identity: config.sdk.credentials.identity,\n  };\n  const webex = (window.webex = Webex.init({\n    config: {\n      credentials,\n      meetings: {\n        deviceType: 'WEB',\n      },\n      services: config.sdk.services,\n      idbroker_url: config.idbroker_url,\n    },\n    // This credentials is used to pass generated access token to the guest meeting connection\n    credentials: {access_token: accessToken},\n  }));\n\n  return webex;\n};\n*/\nconst webex = window.webex = Webex.init({\n  config: {\n    credentials: {\n      client_id: 'C190e9a362204470aa77adb388e66e78ca175ac471e215ce269540297660be61e',\n      redirect_uri: 'http://localhost:3000/addClasses',\n      scope: 'spark:all spark:kms',\n    }\n    }\n});\nconst token = RegExp('[#&]' + 'access_token' + '=([^&]*)').exec(window.location.hash);\n// console.log(token);\n/*\nconst webex = window.webex = Webex.init({\n  config: {\n    credentials: {\n      authorizationString: 'https://webexapis.com/v1/authorize?client_id=C190e9a362204470aa77adb388e66e78ca175ac471e215ce269540297660be61e&response_type=code&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2FaddClasses&scope=spark%3Aall%20spark%3Akms&state=set_state_here',\n      clientType: 'confidential',\n  },\n    }\n});\n*/\nclass Login extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            mail: props.location.mail,\n        }\n    }\n\n    componentDidMount(){\n        requestAccessToken();\n        console.log(sessionStorage.getItem('access_token'));\n        if (this.props.location.shouldLogin === 'login' ) {\n            // webex.authorization.initiateLogin();\n        } if (this.props.location.shouldLogin === 'logout' ) {\n            window.sessionStorage.removeItem('accessToken');\n            webex.logout();\n        }\n    }\n\n    render() {\n\n        return (\n            <div>\n                <h1>{this.state.loggedIn ? \"Redirecting...\" : \"Loading...\"}</h1>\n            </div>\n        );\n    }\n}\n\nexport default Login;\n\n/*\n\n*/\n"]},"metadata":{},"sourceType":"module"}