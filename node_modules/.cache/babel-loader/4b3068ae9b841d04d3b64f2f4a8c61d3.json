{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _iterator = require('babel-runtime/core-js/symbol/iterator');\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _weakMap = require('babel-runtime/core-js/weak-map');\n\nvar _weakMap2 = _interopRequireDefault(_weakMap);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/*!\n * Copyright (c) 2015-2019 Cisco Systems, Inc. See LICENSE file.\n */\n\n\nvar itemsMap = new _weakMap2.default();\nvar linksMap = new _weakMap2.default();\nvar webexsMap = new _weakMap2.default();\n/**\n * @class Page\n */\n\nvar Page = function () {\n  (0, _createClass3.default)(Page, [{\n    key: 'items',\n\n    /**\n     * @type {Array}\n     */\n    get: function get() {\n      return itemsMap.get(this);\n    }\n    /**\n     * @type {number}\n     */\n\n  }, {\n    key: 'length',\n    get: function get() {\n      return this.items.length;\n    }\n    /**\n     * @private\n     * @type {Object}\n     */\n\n  }, {\n    key: 'links',\n    get: function get() {\n      return linksMap.get(this);\n    }\n    /**\n     * @private\n     * @type {ProxyWebex}\n     */\n\n  }, {\n    key: 'webex',\n    get: function get() {\n      return webexsMap.get(this);\n    }\n    /**\n     * @constructs {Page}\n     * @param {HttpResponse} res\n     * @param {ProxyWebex} webex\n     * @returns {Page}\n     */\n\n  }]);\n\n  function Page(res, webex) {\n    (0, _classCallCheck3.default)(this, Page);\n    itemsMap.set(this, res.body.items);\n    linksMap.set(this, Page.parseLinkHeaders(res.headers.link));\n    webexsMap.set(this, webex);\n    return this;\n  }\n  /**\n   * Separate a single link header string into an actionable object\n   * @param {string} linkHeaders\n   * @private\n   * @returns {Object}\n   */\n\n\n  (0, _createClass3.default)(Page, [{\n    key: 'next',\n\n    /**\n     * Get next page\n     * @returns {Function}\n     */\n    value: function next() {\n      return this.getLink('next');\n    }\n    /**\n     * Indicates if there's another page\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: 'hasNext',\n    value: function hasNext() {\n      return this.hasLink('next');\n    }\n    /**\n     * Get previous page\n     * @returns {Page}\n     */\n\n  }, {\n    key: 'previous',\n    value: function previous() {\n      return this.getLink('previous');\n    }\n    /**\n     * Indicates if there is a previous Page\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: 'hasPrevious',\n    value: function hasPrevious() {\n      return this.hasLink('previous');\n    }\n    /**\n     * Retrieves the `Page` at url specified by `link`\n     * @param {string} link Specifies which link header to return\n     * @private\n     * @returns {Promise<Page>}\n     */\n\n  }, {\n    key: 'getLink',\n    value: function getLink(link) {\n      var _this = this;\n\n      return this.webex.request({\n        uri: this.links[link]\n      }).then(function (res) {\n        return new Page(res, _this.webex);\n      });\n    }\n    /**\n     * Indicates if the specified link is in the link header\n     * @param {string} link\n     * @private\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: 'hasLink',\n    value: function hasLink(link) {\n      return Boolean(this.links[link]);\n    }\n    /**\n     * Iterator\n     * @returns {Object}\n     */\n\n  }, {\n    key: _iterator2.default,\n    value: function value() {\n      var _this2 = this;\n\n      var i = -1;\n      return {\n        next: function next() {\n          i += 1;\n\n          if (i < _this2.length) {\n            return {\n              value: _this2.items[i]\n            };\n          }\n\n          return {\n            done: true\n          };\n        }\n      };\n    }\n  }], [{\n    key: 'parseLinkHeaders',\n    value: function parseLinkHeaders(linkHeaders) {\n      if (!linkHeaders) {\n        return {};\n      }\n\n      linkHeaders = Array.isArray(linkHeaders) ? linkHeaders : [linkHeaders];\n      return linkHeaders.reduce(function (links, linkHeader) {\n        linkHeader = linkHeader.split(';');\n        var link = linkHeader[0].replace('<', '').replace('>', '');\n        var rel = linkHeader[1].split('=')[1].replace(/\"/g, '');\n        links[rel] = link;\n        return links;\n      }, {});\n    }\n  }]);\n  return Page;\n}();\n\nexports.default = Page;","map":{"version":3,"sources":["page.js"],"names":["itemsMap","linksMap","webexsMap","Page","res","linkHeaders","Array","linkHeader","link","rel","links","uri","Boolean","i","next","value","done"],"mappings":"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","sourcesContent":["/*!\n * Copyright (c) 2015-2019 Cisco Systems, Inc. See LICENSE file.\n */\n\nconst itemsMap = new WeakMap();\nconst linksMap = new WeakMap();\nconst webexsMap = new WeakMap();\n\n/**\n * @class Page\n */\nexport default class Page {\n  /**\n   * @type {Array}\n   */\n  get items() {\n    return itemsMap.get(this);\n  }\n\n  /**\n   * @type {number}\n   */\n  get length() {\n    return this.items.length;\n  }\n\n  /**\n   * @private\n   * @type {Object}\n   */\n  get links() {\n    return linksMap.get(this);\n  }\n\n  /**\n   * @private\n   * @type {ProxyWebex}\n   */\n  get webex() {\n    return webexsMap.get(this);\n  }\n\n  /**\n   * @constructs {Page}\n   * @param {HttpResponse} res\n   * @param {ProxyWebex} webex\n   * @returns {Page}\n   */\n  constructor(res, webex) {\n    itemsMap.set(this, res.body.items);\n    linksMap.set(this, Page.parseLinkHeaders(res.headers.link));\n    webexsMap.set(this, webex);\n\n    return this;\n  }\n\n  /**\n   * Separate a single link header string into an actionable object\n   * @param {string} linkHeaders\n   * @private\n   * @returns {Object}\n   */\n  static parseLinkHeaders(linkHeaders) {\n    if (!linkHeaders) {\n      return {};\n    }\n\n    linkHeaders = Array.isArray(linkHeaders) ? linkHeaders : [linkHeaders];\n\n    return linkHeaders.reduce((links, linkHeader) => {\n      linkHeader = linkHeader.split(';');\n      const link = linkHeader[0]\n        .replace('<', '')\n        .replace('>', '');\n      const rel = linkHeader[1]\n        .split('=')[1]\n        .replace(/\"/g, '');\n\n      links[rel] = link;\n\n      return links;\n    }, {});\n  }\n\n  /**\n   * Get next page\n   * @returns {Function}\n   */\n  next() {\n    return this.getLink('next');\n  }\n\n  /**\n   * Indicates if there's another page\n   * @returns {Boolean}\n   */\n  hasNext() {\n    return this.hasLink('next');\n  }\n\n  /**\n   * Get previous page\n   * @returns {Page}\n   */\n  previous() {\n    return this.getLink('previous');\n  }\n\n  /**\n   * Indicates if there is a previous Page\n   * @returns {Boolean}\n   */\n  hasPrevious() {\n    return this.hasLink('previous');\n  }\n\n  /**\n   * Retrieves the `Page` at url specified by `link`\n   * @param {string} link Specifies which link header to return\n   * @private\n   * @returns {Promise<Page>}\n   */\n  getLink(link) {\n    return this.webex.request({\n      uri: this.links[link]\n    })\n      .then((res) => new Page(res, this.webex));\n  }\n\n  /**\n   * Indicates if the specified link is in the link header\n   * @param {string} link\n   * @private\n   * @returns {Boolean}\n   */\n  hasLink(link) {\n    return Boolean(this.links[link]);\n  }\n\n  /**\n   * Iterator\n   * @returns {Object}\n   */\n  [Symbol.iterator]() {\n    let i = -1;\n\n    return {\n      next: () => {\n        i += 1;\n        if (i < this.length) {\n          return {\n            value: this.items[i]\n          };\n        }\n\n        return {done: true};\n      }\n    };\n  }\n}\n"]},"metadata":{},"sourceType":"script"}