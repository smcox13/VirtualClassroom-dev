{"ast":null,"code":"/**!\n * lib/keyobject.js -- KMS Key Representation\n *\n * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.\n */\n\"use strict\";\n\nvar cloneDeep = require(\"lodash.clonedeep\"),\n    jose = require(\"node-jose\");\n\nfunction KMSKeyObject(rep) {\n  rep = cloneDeep(rep || {}); // coerce date fields\n\n  [\"createDate\", \"expirationDate\", \"bindDate\"].forEach(function (f) {\n    if (f in rep && rep[f]) {\n      rep[f] = \"string\" === typeof rep[f] ? new Date(Date.parse(rep[f])) : rep[f];\n    }\n  });\n  Object.defineProperty(this, \"uri\", {\n    get: function () {\n      return rep.uri || \"\";\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"jwk\", {\n    get: function () {\n      return rep.jwk || undefined;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"userId\", {\n    get: function () {\n      return rep.userId || \"\";\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"clientId\", {\n    get: function () {\n      return rep.clientId || \"\";\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"createDate\", {\n    get: function () {\n      return rep.createDate || undefined;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"expirationDate\", {\n    get: function () {\n      return rep.expirationDate || undefined;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"bindDate\", {\n    get: function () {\n      return rep.bindDate || undefined;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"resourceUri\", {\n    get: function () {\n      return rep.resourceUri || \"\";\n    },\n    enumerable: true\n  });\n} // ### Instance Methods ###\n\n\nKMSKeyObject.prototype.asKey = function () {\n  if (!this.jwk) {\n    return Promise.reject(new Error(\"'jwk' not set\"));\n  }\n\n  return jose.JWK.asKey(this.jwk);\n};\n\nKMSKeyObject.prototype.toJSON = function () {\n  var self = this,\n      json = {};\n  Object.keys(this).forEach(function (f) {\n    var v = self[f];\n\n    if (\"function\" === typeof v || \"undefined\" === typeof v) {\n      return;\n    }\n\n    if (v instanceof Date) {\n      v = v.toISOString();\n    }\n\n    json[f] = cloneDeep(v);\n  });\n  return json;\n}; // ### Class Functions ###\n\n\nKMSKeyObject.fromObject = function (rep) {\n  if (!rep) {\n    throw new TypeError(\"representation required\");\n  }\n\n  if (rep instanceof KMSKeyObject) {\n    return rep;\n  }\n\n  return new KMSKeyObject(rep);\n};\n\nmodule.exports = KMSKeyObject;","map":{"version":3,"sources":["/Users/pratison/Work/Cisco/Education/React/education-webex/node_modules/node-kms/lib/keyobject.js"],"names":["cloneDeep","require","jose","KMSKeyObject","rep","forEach","f","Date","parse","Object","defineProperty","get","uri","enumerable","jwk","undefined","userId","clientId","createDate","expirationDate","bindDate","resourceUri","prototype","asKey","Promise","reject","Error","JWK","toJSON","self","json","keys","v","toISOString","fromObject","TypeError","module","exports"],"mappings":"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","sourcesContent":["/**!\n * lib/keyobject.js -- KMS Key Representation\n *\n * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.\n */\n \"use strict\";\n\nvar cloneDeep = require(\"lodash.clonedeep\"),\n    jose = require(\"node-jose\");\n\nfunction KMSKeyObject(rep) {\n  rep = cloneDeep(rep || {});\n  // coerce date fields\n  [\"createDate\", \"expirationDate\", \"bindDate\"].forEach(function(f) {\n    if (f in rep && rep[f]) {\n      rep[f] = \"string\" === typeof rep[f] ?\n               new Date(Date.parse(rep[f])) :\n               rep[f];\n    }\n  });\n\n  Object.defineProperty(this, \"uri\", {\n    get: function() { return rep.uri || \"\"; },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"jwk\", {\n    get: function() { return rep.jwk || undefined; },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"userId\", {\n    get: function() { return rep.userId || \"\"; },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"clientId\", {\n    get: function() { return rep.clientId || \"\"; },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"createDate\", {\n    get: function() { return rep.createDate || undefined; },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"expirationDate\", {\n    get: function() { return rep.expirationDate || undefined; },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"bindDate\", {\n    get: function() { return rep.bindDate || undefined; },\n    enumerable: true\n  });\n  Object.defineProperty(this, \"resourceUri\", {\n    get: function() { return rep.resourceUri || \"\"; },\n    enumerable: true\n  });\n}\n\n// ### Instance Methods ###\nKMSKeyObject.prototype.asKey = function() {\n  if (!this.jwk) {\n    return Promise.reject(new Error(\"'jwk' not set\"));\n  }\n  return jose.JWK.asKey(this.jwk);\n};\n\nKMSKeyObject.prototype.toJSON = function() {\n  var self = this,\n      json = {};\n  Object.keys(this).forEach(function(f) {\n    var v = self[f];\n    if (\"function\" === typeof v || \"undefined\" === typeof v) {\n      return;\n    }\n    if (v instanceof Date) {\n      v = v.toISOString();\n    }\n    json[f] = cloneDeep(v);\n  });\n\n  return json;\n};\n\n// ### Class Functions ###\nKMSKeyObject.fromObject = function(rep) {\n  if (!rep) {\n    throw new TypeError(\"representation required\");\n  }\n  if (rep instanceof KMSKeyObject) {\n    return rep;\n  }\n  return new KMSKeyObject(rep);\n};\n\nmodule.exports = KMSKeyObject;\n"]},"metadata":{},"sourceType":"script"}