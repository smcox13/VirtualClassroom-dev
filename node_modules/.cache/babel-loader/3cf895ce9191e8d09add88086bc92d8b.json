{"ast":null,"code":"function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n/** @component list-item */\n\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport omit from 'lodash/omit';\nimport uniqueId from 'lodash/uniqueId';\nimport qsa from 'dom-helpers/query/querySelectorAll';\nimport SelectableContext from \"../SelectableContext\";\nimport ListContext from \"../ListContext\";\n\nvar List = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(List, _React$Component);\n\n  List.getDerivedStateFromProps = function getDerivedStateFromProps(_ref, state) {\n    var active = _ref.active;\n    return active ? _extends({}, state, {\n      listContext: _extends({}, state.listContext, {\n        active: active\n      })\n    }) : state;\n  };\n\n  function List(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _this.determineInitialFocus = function () {\n      var _this$props = _this.props,\n          focusFirstQuery = _this$props.focusFirstQuery,\n          shouldFocusInitial = _this$props.shouldFocusInitial;\n      var listContext = _this.state.listContext;\n      var items = qsa(_this.listNode, focusFirstQuery || \".md-list-item:not(.disabled):not(:disabled):not(.md-list-item--read-only)\");\n      var focus = listContext.focus;\n\n      if (items.length) {\n        if (!focus) {\n          focus = _this.getNextFocusedChild(items, items[0], 0);\n        }\n\n        if (focus && shouldFocusInitial) {\n          _this.listNode.querySelector(\"[data-md-event-key=\\\"\" + focus + \"\\\"]\").focus();\n        }\n      }\n    };\n\n    _this.getIncludesFirstCharacter = function (str, char) {\n      return str.charAt(0).toLowerCase().includes(char);\n    };\n\n    _this.getValue = function (arr, index, attribute) {\n      return arr[index].attributes[\"data-md-\" + attribute + \"-key\"] && arr[index].attributes[\"data-md-\" + attribute + \"-key\"].value;\n    };\n\n    _this.getFocusableItems = function () {\n      if (!_this.listNode) return null;\n      var focusQuery = _this.props.focusQuery;\n      var defaultItems = qsa(_this.listNode, \".md-list-item:not(.disabled):not(:disabled):not(.md-list-item--read-only)\");\n      var customItems = focusQuery && qsa(_this.listNode, focusQuery) || [];\n      return customItems.length ? customItems.filter(function (item) {\n        return customItems.indexOf(item) >= 0;\n      }) : defaultItems;\n    };\n\n    _this.handleKeyDown = function (e) {\n      var _this$props2 = _this.props,\n          shouldFocusActive = _this$props2.shouldFocusActive,\n          shouldPropagateKeyDown = _this$props2.shouldPropagateKeyDown;\n      var focus = _this.state.listContext.focus;\n      var clickEvent;\n      var tgt = e.currentTarget;\n      var char = e.key;\n\n      var items = _this.getFocusableItems();\n\n      var length = items.length && items.length - 1 || 0;\n      var focusIdx = focus && items.indexOf(_this.listNode.querySelector(\"[data-md-event-key=\\\"\" + focus + \"\\\"]\")) || 0;\n      var flag = false;\n\n      var isPrintableCharacter = function isPrintableCharacter(str) {\n        return str.length === 1 && str.match(/\\S/);\n      };\n\n      switch (e.which) {\n        case 9:\n          if (shouldFocusActive) {\n            _this._needsRefocus = false;\n\n            _this.setFocusToActive();\n          }\n\n          break;\n\n        case 32:\n        case 13:\n          try {\n            clickEvent = new MouseEvent('click', {\n              view: window,\n              bubbles: true,\n              cancelable: true\n            });\n          } catch (err) {\n            if (document.createEvent) {\n              // DOM Level 3 for IE 9+\n              clickEvent = document.createEvent('MouseEvents');\n              clickEvent.initEvent('click', true, true);\n            }\n          }\n\n          tgt.dispatchEvent(clickEvent);\n          flag = true;\n          break;\n\n        case 38:\n        case 37:\n          _this.getNextFocusedChild(items, tgt, -1);\n\n          _this._needsRefocus = true;\n          if (!shouldPropagateKeyDown) flag = true;\n          break;\n\n        case 39:\n        case 40:\n          _this.getNextFocusedChild(items, tgt, 1);\n\n          _this._needsRefocus = true;\n          if (!shouldPropagateKeyDown) flag = true;\n          break;\n\n        case 33:\n        case 36:\n          _this.setFocusToLimit('start', items, length);\n\n          _this._needsRefocus = true;\n          flag = true;\n          break;\n\n        case 34:\n        case 35:\n          _this.setFocusToLimit('end', items, length);\n\n          _this._needsRefocus = true;\n          flag = true;\n          break;\n\n        default:\n          if (isPrintableCharacter(char)) {\n            _this.setFocusByFirstCharacter(char, focusIdx, items, length);\n\n            _this._needsRefocus = true;\n            flag = true;\n          }\n\n          break;\n      }\n\n      if (flag) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    };\n\n    _this.handleSelect = function (e, opts) {\n      var _this$props3 = _this.props,\n          onSelect = _this$props3.onSelect,\n          trackActive = _this$props3.trackActive;\n      var active = _this.state.listContext.active;\n      var eventKey = opts.eventKey,\n          label = opts.label,\n          value = opts.value;\n\n      var items = _this.getFocusableItems();\n\n      var index = items.findIndex(function (item) {\n        return item.getAttribute('data-md-event-key') === eventKey || item.querySelector(\"[data-md-event-key=\\\"\" + eventKey + \"\\\"]\");\n      }); // Don't do anything if index is the same or outside of the bounds\n\n      if (eventKey === active || index < 0 || index > items.length - 1) return;\n\n      _this.setFocus(items, index); // Don't do anything if onSelect Event Handler is present\n\n\n      if (onSelect) {\n        return onSelect(e, {\n          eventKey: _this.getValue(items, index, 'event'),\n          label: label,\n          value: value\n        });\n      } // Keep reference to last index for event handler\n\n\n      var last = active; // Call change event handler\n\n      trackActive && _this.setState(function (state) {\n        return {\n          last: last,\n          listContext: _extends({}, state.listContext, {\n            active: _this.getValue(items, index, 'event')\n          })\n        };\n      });\n    };\n\n    _this.setFocus = function (items, index) {\n      _this.setState(function (state) {\n        return {\n          listContext: _extends({}, state.listContext, {\n            focus: _this.getValue(items, index, 'event')\n          })\n        };\n      });\n    };\n\n    _this.setActiveAndFocus = function (active, focus) {\n      _this._needsRefocus = false;\n\n      _this.setState(function (state) {\n        return {\n          listContext: _extends({}, state.listContext, {\n            active: active,\n            focus: state.shouldFocusActive && active || focus\n          })\n        };\n      });\n    };\n\n    _this.setFocusByFirstCharacter = function (char, focusIdx, items, length) {\n      var listContext = _this.state.listContext;\n      var newIndex = items.reduce(function (agg, item, idx, arr) {\n        var index = focusIdx + idx + 1 > length ? Math.abs(focusIdx + idx - length) : focusIdx + idx + 1;\n        return !agg.length && _this.getValue(arr, index, 'keyboard') && _this.getIncludesFirstCharacter(_this.getValue(arr, index, 'keyboard'), char) ? agg.concat(_this.getValue(arr, index, 'event')) : agg;\n      }, []);\n      typeof newIndex[0] === 'string' && listContext.focus !== newIndex[0] && _this.setState(function (state) {\n        return {\n          listContext: _extends({}, state.listContext, {\n            focus: newIndex[0]\n          })\n        };\n      });\n    };\n\n    _this.state = {\n      id: props.id || uniqueId('md-list-'),\n      last: 0,\n      listContext: {\n        active: props.active,\n        focus: props.shouldFocusActive && props.active || props.focus,\n        role: props.itemRole,\n        type: props.type\n      },\n      selectContext: {\n        parentKeyDown: _this.handleKeyDown,\n        parentOnSelect: _this.handleSelect\n      }\n    };\n    return _this;\n  }\n\n  var _proto = List.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var focusFirst = this.props.focusFirst;\n    focusFirst && this.listNode && this.determineInitialFocus();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    var listContext = this.state.listContext;\n    var _this$props4 = this.props,\n        active = _this$props4.active,\n        focus = _this$props4.focus,\n        shouldFocusActive = _this$props4.shouldFocusActive;\n\n    if (shouldFocusActive && (prevProps.focus !== focus || prevProps.active !== active)) {\n      this.setActiveAndFocus(active, focus);\n    }\n\n    if (!this._needsRefocus || !this.listNode) return;\n\n    if (listContext.focus && prevState.listContext.focus !== listContext.focus) {\n      this.listNode.querySelector(\"[data-md-event-key=\\\"\" + listContext.focus + \"\\\"]\").focus();\n    }\n  };\n\n  _proto.getNextFocusedChild = function getNextFocusedChild(items, current, offset) {\n    if (!this.listNode) return null;\n    var shouldLoop = this.props.shouldLoop;\n    var listContext = this.state.listContext;\n    var possibleIndex = items.indexOf(current) + offset;\n\n    var getIndex = function getIndex() {\n      if (possibleIndex < 0) {\n        return shouldLoop ? items.length - 1 : 0;\n      } else if (possibleIndex > items.length - 1) {\n        return shouldLoop ? 0 : items.length - 1;\n      } else return possibleIndex;\n    };\n\n    listContext.focus !== this.getValue(items, getIndex(), 'event') && this.setState({\n      listContext: _extends({}, listContext, {\n        focus: this.getValue(items, getIndex(), 'event')\n      })\n    });\n    return this.getValue(items, getIndex(), 'event');\n  };\n\n  _proto.setFocusToActive = function setFocusToActive() {\n    var focus = this.state.listContext.active;\n\n    if (!focus) {\n      var items = this.getFocusableItems();\n      focus = this.getValue(items, 0, 'event');\n    }\n\n    this.setState({\n      listContext: _extends({}, this.state.listContext, {\n        focus: focus\n      })\n    });\n  };\n\n  _proto.setFocusToLimit = function setFocusToLimit(target, items, length) {\n    var focus = this.state.listContext.focus;\n    var index = target === 'start' ? 0 : length;\n    var newFocusKey = this.getValue(items, index, 'event');\n    newFocusKey !== focus && this.setState({\n      listContext: _extends({}, this.state.listContext, {\n        focus: newFocusKey\n      })\n    });\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$props5 = this.props,\n        active = _this$props5.active,\n        children = _this$props5.children,\n        className = _this$props5.className,\n        role = _this$props5.role,\n        tabType = _this$props5.tabType,\n        wrap = _this$props5.wrap,\n        props = _objectWithoutPropertiesLoose(_this$props5, [\"active\", \"children\", \"className\", \"role\", \"tabType\", \"wrap\"]);\n\n    var _this$state = this.state,\n        listContext = _this$state.listContext,\n        selectContext = _this$state.selectContext;\n    var otherProps = omit(_extends({}, props), ['focusFirst', 'focusFirstQuery', 'focusQuery', 'itemRole', 'shouldPropagateKeyDown', 'shouldFocusActive', 'shouldFocusInitial', 'shouldLoop', 'trackActive', 'type']);\n\n    var getActiveId = function getActiveId() {\n      var activeNode = active && active.length && _this2.listNode && _this2.listNode.querySelector(\"[data-md-event-key=\\\"\" + active[0] + \"\\\"]\");\n\n      return activeNode && activeNode.id;\n    };\n    /* eslint-disable jsx-a11y/aria-activedescendant-has-tabindex */\n\n\n    return React.createElement(SelectableContext.Provider, {\n      value: selectContext\n    }, React.createElement(ListContext.Provider, {\n      value: listContext\n    }, React.createElement(\"div\", _extends({\n      className: 'md-list' + (\"\" + (tabType && \" md-list--\" + tabType || '')) + (\"\" + (wrap && \" md-list--wrap\" || '')) + (\"\" + (className && \" \" + className || '')),\n      role: role,\n      \"aria-activedescendant\": getActiveId(),\n      ref: function ref(_ref2) {\n        return _this2.listNode = _ref2;\n      }\n    }, otherProps), children)));\n    /* eslint-enable*/\n  };\n\n  return List;\n}(React.Component);\n\nList.propTypes = {\n  /** @prop Optional active prop to pass active prop to children | null */\n  active: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.number]),\n\n  /** @prop Children nodes to render inside List | null */\n  children: PropTypes.node,\n\n  /** @prop Optional css class string | '' */\n  className: PropTypes.string,\n\n  /** @prop Optional focus prop to pass focus prop to children | null */\n  focus: PropTypes.string,\n\n  /** @prop Sets first List item to have focus within List context | true */\n  focusFirst: PropTypes.bool,\n\n  /** @prop Queries children to find matching item to have focus | '' */\n  focusFirstQuery: PropTypes.string,\n\n  /** @prop Additional elements that can be focused by selector | '' */\n  focusQuery: PropTypes.string,\n\n  /** @prop Optional ID value of List | null */\n  id: PropTypes.string,\n\n  /** @prop Optional tabType prop type to manually set child role | 'listitem' */\n  itemRole: PropTypes.string,\n\n  /** @prop Callback function invoked by user selecting an interactive item within List | null */\n  onSelect: PropTypes.func,\n\n  /** @prop Disables the stopPropagation() & preventDefault() for ArrowKey Events | false */\n  shouldPropagateKeyDown: PropTypes.bool,\n\n  /** @prop Sets the ARIA role for the Nav, in the context of a TabContainer | 'list' */\n  role: PropTypes.string,\n\n  /** @prop Invokes dom focus method on mount | true */\n  shouldFocusInitial: PropTypes.bool,\n\n  /** @prop Determines if focus should revert to active on list exit | false */\n  shouldFocusActive: PropTypes.bool,\n\n  /** @prop Determines if keyboard navigation should loop through list | true */\n  shouldLoop: PropTypes.bool,\n\n  /** @prop Sets the orientation of the List | 'vertical' */\n  tabType: PropTypes.oneOf(['vertical', 'horizontal']),\n\n  /** @prop Determines if List wrapper should track active | true */\n  trackActive: PropTypes.bool,\n\n  /** @prop Sets List size | null */\n  type: PropTypes.oneOf(['small', 'large', 'space', 'xlarge']),\n\n  /** @prop Optional wrap prop type to wrap items to next row */\n  wrap: PropTypes.bool\n};\nList.defaultProps = {\n  active: null,\n  children: null,\n  className: '',\n  id: null,\n  itemRole: 'listitem',\n  focus: null,\n  focusFirst: true,\n  focusFirstQuery: '',\n  focusQuery: '',\n  onSelect: null,\n  shouldPropagateKeyDown: false,\n  role: 'list',\n  shouldFocusActive: false,\n  shouldFocusInitial: true,\n  shouldLoop: true,\n  tabType: 'vertical',\n  trackActive: true,\n  type: null,\n  wrap: false\n};\nList.displayName = 'List';\nexport default List;","map":{"version":3,"sources":["/Users/pratison/Work/Cisco/Education/React/education-webex/node_modules/@momentum-ui/react/es/List/index.js"],"names":["_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","_inheritsLoose","subClass","superClass","create","constructor","__proto__","React","PropTypes","omit","uniqueId","qsa","SelectableContext","ListContext","List","_React$Component","getDerivedStateFromProps","_ref","state","active","listContext","props","_this","determineInitialFocus","_this$props","focusFirstQuery","shouldFocusInitial","items","listNode","focus","getNextFocusedChild","querySelector","getIncludesFirstCharacter","str","char","charAt","toLowerCase","includes","getValue","arr","index","attribute","attributes","value","getFocusableItems","focusQuery","defaultItems","customItems","filter","item","handleKeyDown","e","_this$props2","shouldFocusActive","shouldPropagateKeyDown","clickEvent","tgt","currentTarget","focusIdx","flag","isPrintableCharacter","match","which","_needsRefocus","setFocusToActive","MouseEvent","view","window","bubbles","cancelable","err","document","createEvent","initEvent","dispatchEvent","setFocusToLimit","setFocusByFirstCharacter","stopPropagation","preventDefault","handleSelect","opts","_this$props3","onSelect","trackActive","eventKey","label","findIndex","getAttribute","setFocus","last","setState","setActiveAndFocus","newIndex","reduce","agg","idx","Math","abs","concat","id","role","itemRole","type","selectContext","parentKeyDown","parentOnSelect","_proto","componentDidMount","focusFirst","componentDidUpdate","prevProps","prevState","_this$props4","current","offset","shouldLoop","possibleIndex","getIndex","newFocusKey","render","_this2","_this$props5","children","className","tabType","wrap","_this$state","otherProps","getActiveId","activeNode","createElement","Provider","ref","_ref2","Component","propTypes","oneOfType","string","array","number","node","bool","func","oneOf","defaultProps","displayName"],"mappings":"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","sourcesContent":["function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/** @component list-item */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport omit from 'lodash/omit';\nimport uniqueId from 'lodash/uniqueId';\nimport qsa from 'dom-helpers/query/querySelectorAll';\nimport SelectableContext from \"../SelectableContext\";\nimport ListContext from \"../ListContext\";\n\nvar List = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(List, _React$Component);\n\n  List.getDerivedStateFromProps = function getDerivedStateFromProps(_ref, state) {\n    var active = _ref.active;\n    return active ? _extends({}, state, {\n      listContext: _extends({}, state.listContext, {\n        active: active\n      })\n    }) : state;\n  };\n\n  function List(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _this.determineInitialFocus = function () {\n      var _this$props = _this.props,\n          focusFirstQuery = _this$props.focusFirstQuery,\n          shouldFocusInitial = _this$props.shouldFocusInitial;\n      var listContext = _this.state.listContext;\n      var items = qsa(_this.listNode, focusFirstQuery || \".md-list-item:not(.disabled):not(:disabled):not(.md-list-item--read-only)\");\n      var focus = listContext.focus;\n\n      if (items.length) {\n        if (!focus) {\n          focus = _this.getNextFocusedChild(items, items[0], 0);\n        }\n\n        if (focus && shouldFocusInitial) {\n          _this.listNode.querySelector(\"[data-md-event-key=\\\"\" + focus + \"\\\"]\").focus();\n        }\n      }\n    };\n\n    _this.getIncludesFirstCharacter = function (str, char) {\n      return str.charAt(0).toLowerCase().includes(char);\n    };\n\n    _this.getValue = function (arr, index, attribute) {\n      return arr[index].attributes[\"data-md-\" + attribute + \"-key\"] && arr[index].attributes[\"data-md-\" + attribute + \"-key\"].value;\n    };\n\n    _this.getFocusableItems = function () {\n      if (!_this.listNode) return null;\n      var focusQuery = _this.props.focusQuery;\n      var defaultItems = qsa(_this.listNode, \".md-list-item:not(.disabled):not(:disabled):not(.md-list-item--read-only)\");\n      var customItems = focusQuery && qsa(_this.listNode, focusQuery) || [];\n      return customItems.length ? customItems.filter(function (item) {\n        return customItems.indexOf(item) >= 0;\n      }) : defaultItems;\n    };\n\n    _this.handleKeyDown = function (e) {\n      var _this$props2 = _this.props,\n          shouldFocusActive = _this$props2.shouldFocusActive,\n          shouldPropagateKeyDown = _this$props2.shouldPropagateKeyDown;\n      var focus = _this.state.listContext.focus;\n      var clickEvent;\n      var tgt = e.currentTarget;\n      var char = e.key;\n\n      var items = _this.getFocusableItems();\n\n      var length = items.length && items.length - 1 || 0;\n      var focusIdx = focus && items.indexOf(_this.listNode.querySelector(\"[data-md-event-key=\\\"\" + focus + \"\\\"]\")) || 0;\n      var flag = false;\n\n      var isPrintableCharacter = function isPrintableCharacter(str) {\n        return str.length === 1 && str.match(/\\S/);\n      };\n\n      switch (e.which) {\n        case 9:\n          if (shouldFocusActive) {\n            _this._needsRefocus = false;\n\n            _this.setFocusToActive();\n          }\n\n          break;\n\n        case 32:\n        case 13:\n          try {\n            clickEvent = new MouseEvent('click', {\n              view: window,\n              bubbles: true,\n              cancelable: true\n            });\n          } catch (err) {\n            if (document.createEvent) {\n              // DOM Level 3 for IE 9+\n              clickEvent = document.createEvent('MouseEvents');\n              clickEvent.initEvent('click', true, true);\n            }\n          }\n\n          tgt.dispatchEvent(clickEvent);\n          flag = true;\n          break;\n\n        case 38:\n        case 37:\n          _this.getNextFocusedChild(items, tgt, -1);\n\n          _this._needsRefocus = true;\n          if (!shouldPropagateKeyDown) flag = true;\n          break;\n\n        case 39:\n        case 40:\n          _this.getNextFocusedChild(items, tgt, 1);\n\n          _this._needsRefocus = true;\n          if (!shouldPropagateKeyDown) flag = true;\n          break;\n\n        case 33:\n        case 36:\n          _this.setFocusToLimit('start', items, length);\n\n          _this._needsRefocus = true;\n          flag = true;\n          break;\n\n        case 34:\n        case 35:\n          _this.setFocusToLimit('end', items, length);\n\n          _this._needsRefocus = true;\n          flag = true;\n          break;\n\n        default:\n          if (isPrintableCharacter(char)) {\n            _this.setFocusByFirstCharacter(char, focusIdx, items, length);\n\n            _this._needsRefocus = true;\n            flag = true;\n          }\n\n          break;\n      }\n\n      if (flag) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    };\n\n    _this.handleSelect = function (e, opts) {\n      var _this$props3 = _this.props,\n          onSelect = _this$props3.onSelect,\n          trackActive = _this$props3.trackActive;\n      var active = _this.state.listContext.active;\n      var eventKey = opts.eventKey,\n          label = opts.label,\n          value = opts.value;\n\n      var items = _this.getFocusableItems();\n\n      var index = items.findIndex(function (item) {\n        return item.getAttribute('data-md-event-key') === eventKey || item.querySelector(\"[data-md-event-key=\\\"\" + eventKey + \"\\\"]\");\n      }); // Don't do anything if index is the same or outside of the bounds\n\n      if (eventKey === active || index < 0 || index > items.length - 1) return;\n\n      _this.setFocus(items, index); // Don't do anything if onSelect Event Handler is present\n\n\n      if (onSelect) {\n        return onSelect(e, {\n          eventKey: _this.getValue(items, index, 'event'),\n          label: label,\n          value: value\n        });\n      } // Keep reference to last index for event handler\n\n\n      var last = active; // Call change event handler\n\n      trackActive && _this.setState(function (state) {\n        return {\n          last: last,\n          listContext: _extends({}, state.listContext, {\n            active: _this.getValue(items, index, 'event')\n          })\n        };\n      });\n    };\n\n    _this.setFocus = function (items, index) {\n      _this.setState(function (state) {\n        return {\n          listContext: _extends({}, state.listContext, {\n            focus: _this.getValue(items, index, 'event')\n          })\n        };\n      });\n    };\n\n    _this.setActiveAndFocus = function (active, focus) {\n      _this._needsRefocus = false;\n\n      _this.setState(function (state) {\n        return {\n          listContext: _extends({}, state.listContext, {\n            active: active,\n            focus: state.shouldFocusActive && active || focus\n          })\n        };\n      });\n    };\n\n    _this.setFocusByFirstCharacter = function (char, focusIdx, items, length) {\n      var listContext = _this.state.listContext;\n      var newIndex = items.reduce(function (agg, item, idx, arr) {\n        var index = focusIdx + idx + 1 > length ? Math.abs(focusIdx + idx - length) : focusIdx + idx + 1;\n        return !agg.length && _this.getValue(arr, index, 'keyboard') && _this.getIncludesFirstCharacter(_this.getValue(arr, index, 'keyboard'), char) ? agg.concat(_this.getValue(arr, index, 'event')) : agg;\n      }, []);\n      typeof newIndex[0] === 'string' && listContext.focus !== newIndex[0] && _this.setState(function (state) {\n        return {\n          listContext: _extends({}, state.listContext, {\n            focus: newIndex[0]\n          })\n        };\n      });\n    };\n\n    _this.state = {\n      id: props.id || uniqueId('md-list-'),\n      last: 0,\n      listContext: {\n        active: props.active,\n        focus: props.shouldFocusActive && props.active || props.focus,\n        role: props.itemRole,\n        type: props.type\n      },\n      selectContext: {\n        parentKeyDown: _this.handleKeyDown,\n        parentOnSelect: _this.handleSelect\n      }\n    };\n    return _this;\n  }\n\n  var _proto = List.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var focusFirst = this.props.focusFirst;\n    focusFirst && this.listNode && this.determineInitialFocus();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    var listContext = this.state.listContext;\n    var _this$props4 = this.props,\n        active = _this$props4.active,\n        focus = _this$props4.focus,\n        shouldFocusActive = _this$props4.shouldFocusActive;\n\n    if (shouldFocusActive && (prevProps.focus !== focus || prevProps.active !== active)) {\n      this.setActiveAndFocus(active, focus);\n    }\n\n    if (!this._needsRefocus || !this.listNode) return;\n\n    if (listContext.focus && prevState.listContext.focus !== listContext.focus) {\n      this.listNode.querySelector(\"[data-md-event-key=\\\"\" + listContext.focus + \"\\\"]\").focus();\n    }\n  };\n\n  _proto.getNextFocusedChild = function getNextFocusedChild(items, current, offset) {\n    if (!this.listNode) return null;\n    var shouldLoop = this.props.shouldLoop;\n    var listContext = this.state.listContext;\n    var possibleIndex = items.indexOf(current) + offset;\n\n    var getIndex = function getIndex() {\n      if (possibleIndex < 0) {\n        return shouldLoop ? items.length - 1 : 0;\n      } else if (possibleIndex > items.length - 1) {\n        return shouldLoop ? 0 : items.length - 1;\n      } else return possibleIndex;\n    };\n\n    listContext.focus !== this.getValue(items, getIndex(), 'event') && this.setState({\n      listContext: _extends({}, listContext, {\n        focus: this.getValue(items, getIndex(), 'event')\n      })\n    });\n    return this.getValue(items, getIndex(), 'event');\n  };\n\n  _proto.setFocusToActive = function setFocusToActive() {\n    var focus = this.state.listContext.active;\n\n    if (!focus) {\n      var items = this.getFocusableItems();\n      focus = this.getValue(items, 0, 'event');\n    }\n\n    this.setState({\n      listContext: _extends({}, this.state.listContext, {\n        focus: focus\n      })\n    });\n  };\n\n  _proto.setFocusToLimit = function setFocusToLimit(target, items, length) {\n    var focus = this.state.listContext.focus;\n    var index = target === 'start' ? 0 : length;\n    var newFocusKey = this.getValue(items, index, 'event');\n    newFocusKey !== focus && this.setState({\n      listContext: _extends({}, this.state.listContext, {\n        focus: newFocusKey\n      })\n    });\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$props5 = this.props,\n        active = _this$props5.active,\n        children = _this$props5.children,\n        className = _this$props5.className,\n        role = _this$props5.role,\n        tabType = _this$props5.tabType,\n        wrap = _this$props5.wrap,\n        props = _objectWithoutPropertiesLoose(_this$props5, [\"active\", \"children\", \"className\", \"role\", \"tabType\", \"wrap\"]);\n\n    var _this$state = this.state,\n        listContext = _this$state.listContext,\n        selectContext = _this$state.selectContext;\n    var otherProps = omit(_extends({}, props), ['focusFirst', 'focusFirstQuery', 'focusQuery', 'itemRole', 'shouldPropagateKeyDown', 'shouldFocusActive', 'shouldFocusInitial', 'shouldLoop', 'trackActive', 'type']);\n\n    var getActiveId = function getActiveId() {\n      var activeNode = active && active.length && _this2.listNode && _this2.listNode.querySelector(\"[data-md-event-key=\\\"\" + active[0] + \"\\\"]\");\n\n      return activeNode && activeNode.id;\n    };\n    /* eslint-disable jsx-a11y/aria-activedescendant-has-tabindex */\n\n\n    return React.createElement(SelectableContext.Provider, {\n      value: selectContext\n    }, React.createElement(ListContext.Provider, {\n      value: listContext\n    }, React.createElement(\"div\", _extends({\n      className: 'md-list' + (\"\" + (tabType && \" md-list--\" + tabType || '')) + (\"\" + (wrap && \" md-list--wrap\" || '')) + (\"\" + (className && \" \" + className || '')),\n      role: role,\n      \"aria-activedescendant\": getActiveId(),\n      ref: function ref(_ref2) {\n        return _this2.listNode = _ref2;\n      }\n    }, otherProps), children)));\n    /* eslint-enable*/\n  };\n\n  return List;\n}(React.Component);\n\nList.propTypes = {\n  /** @prop Optional active prop to pass active prop to children | null */\n  active: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.number]),\n\n  /** @prop Children nodes to render inside List | null */\n  children: PropTypes.node,\n\n  /** @prop Optional css class string | '' */\n  className: PropTypes.string,\n\n  /** @prop Optional focus prop to pass focus prop to children | null */\n  focus: PropTypes.string,\n\n  /** @prop Sets first List item to have focus within List context | true */\n  focusFirst: PropTypes.bool,\n\n  /** @prop Queries children to find matching item to have focus | '' */\n  focusFirstQuery: PropTypes.string,\n\n  /** @prop Additional elements that can be focused by selector | '' */\n  focusQuery: PropTypes.string,\n\n  /** @prop Optional ID value of List | null */\n  id: PropTypes.string,\n\n  /** @prop Optional tabType prop type to manually set child role | 'listitem' */\n  itemRole: PropTypes.string,\n\n  /** @prop Callback function invoked by user selecting an interactive item within List | null */\n  onSelect: PropTypes.func,\n\n  /** @prop Disables the stopPropagation() & preventDefault() for ArrowKey Events | false */\n  shouldPropagateKeyDown: PropTypes.bool,\n\n  /** @prop Sets the ARIA role for the Nav, in the context of a TabContainer | 'list' */\n  role: PropTypes.string,\n\n  /** @prop Invokes dom focus method on mount | true */\n  shouldFocusInitial: PropTypes.bool,\n\n  /** @prop Determines if focus should revert to active on list exit | false */\n  shouldFocusActive: PropTypes.bool,\n\n  /** @prop Determines if keyboard navigation should loop through list | true */\n  shouldLoop: PropTypes.bool,\n\n  /** @prop Sets the orientation of the List | 'vertical' */\n  tabType: PropTypes.oneOf(['vertical', 'horizontal']),\n\n  /** @prop Determines if List wrapper should track active | true */\n  trackActive: PropTypes.bool,\n\n  /** @prop Sets List size | null */\n  type: PropTypes.oneOf(['small', 'large', 'space', 'xlarge']),\n\n  /** @prop Optional wrap prop type to wrap items to next row */\n  wrap: PropTypes.bool\n};\nList.defaultProps = {\n  active: null,\n  children: null,\n  className: '',\n  id: null,\n  itemRole: 'listitem',\n  focus: null,\n  focusFirst: true,\n  focusFirstQuery: '',\n  focusQuery: '',\n  onSelect: null,\n  shouldPropagateKeyDown: false,\n  role: 'list',\n  shouldFocusActive: false,\n  shouldFocusInitial: true,\n  shouldLoop: true,\n  tabType: 'vertical',\n  trackActive: true,\n  type: null,\n  wrap: false\n};\nList.displayName = 'List';\nexport default List;"]},"metadata":{},"sourceType":"module"}