{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _presence = require('./presence');\n\nObject.defineProperty(exports, 'default', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_presence).default;\n  }\n});\n\nrequire('@webex/internal-plugin-device');\n\nvar _webexCore = require('@webex/webex-core');\n\nvar _presence2 = _interopRequireDefault(_presence);\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/*!\n * Copyright (c) 2015-2019 Cisco Systems, Inc. See LICENSE file.\n */\n\n\n(0, _webexCore.registerInternalPlugin)('presence', _presence2.default, {\n  payloadTransformer: {\n    predicates: [{\n      name: 'normalizeSingleStatusResponse',\n      direction: 'inbound',\n      test: function test(ctx, response) {\n        // POST to /apheleia/api/v1/events\n        return _promise2.default.resolve((0, _has3.default)(response, 'body.eventType') && (0, _has3.default)(response, 'body.subject'));\n      },\n      extract: function extract(response) {\n        return _promise2.default.resolve(response);\n      }\n    }],\n    transforms: [{\n      name: 'normalizeSingleStatusResponse',\n      direction: 'inbound',\n      fn: function fn(ctx, response) {\n        response.body.status = response.body.eventType;\n      }\n    }]\n  },\n  config: _config2.default\n});","map":{"version":3,"sources":["index.js"],"names":["Presence","payloadTransformer","predicates","name","direction","test","extract","transforms","fn","response","config","default"],"mappings":";;;;;;;;;;;;;;;AASA,IAAA,SAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;;;;6CA+BQW,O;;;;AApCR,OAAA,CAAA,+BAAA,CAAA;;AAEA,IAAA,UAAA,GAAA,OAAA,CAAA,mBAAA,CAAA;;;;AAIA,IAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;;;;;;;;AAVA;;;;;AAYA,CAAA,GAAA,UAAA,CAAA,sBAAA,EAAA,UAAA,EAAmCX,UAAAA,CAAnC,OAAA,EAA6C;AAC3CC,EAAAA,kBAAAA,EAAoB;AAClBC,IAAAA,UAAAA,EAAY,CACV;AACEC,MAAAA,IAAAA,EADF,+BAAA;AAEEC,MAAAA,SAAAA,EAFF,SAAA;AAGEC,MAAAA,IAHF,EAAA,SAAA,IAAA,CAAA,GAAA,EAAA,QAAA,EAGsB;AAClB;AACA,eAAO,SAAA,CAAA,OAAA,CAAA,OAAA,CAAgB,CAAA,GAAA,KAAA,CAAA,OAAA,EAAA,QAAA,EAAA,gBAAA,KAAmC,CAAA,GAAA,KAAA,CAAA,OAAA,EAAA,QAAA,EAA1D,cAA0D,CAAnD,CAAP;AALJ,OAAA;AAOEC,MAAAA,OAPF,EAAA,SAAA,OAAA,CAAA,QAAA,EAOoB;AAChB,eAAO,SAAA,CAAA,OAAA,CAAA,OAAA,CAAP,QAAO,CAAP;AACD;AATH,KADU,CADM;AAclBC,IAAAA,UAAAA,EAAY,CACV;AACEJ,MAAAA,IAAAA,EADF,+BAAA;AAEEC,MAAAA,SAAAA,EAFF,SAAA;AAGEI,MAAAA,EAHF,EAAA,SAAA,EAAA,CAAA,GAAA,EAAA,QAAA,EAGoB;AAChBC,QAAAA,QAAAA,CAAAA,IAAAA,CAAAA,MAAAA,GAAuBA,QAAAA,CAAAA,IAAAA,CAAvBA,SAAAA;AACD;AALH,KADU;AAdM,GADuB;AAyB3CC,EAAAA,MAAAA,EAAAA,QAAAA,CAAAA;AAzB2C,CAA7C","sourcesContent":["/*!\n * Copyright (c) 2015-2019 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport '@webex/internal-plugin-device';\n\nimport {registerInternalPlugin} from '@webex/webex-core';\nimport {has} from 'lodash';\n\nimport Presence from './presence';\nimport config from './config';\n\nregisterInternalPlugin('presence', Presence, {\n  payloadTransformer: {\n    predicates: [\n      {\n        name: 'normalizeSingleStatusResponse',\n        direction: 'inbound',\n        test(ctx, response) {\n          // POST to /apheleia/api/v1/events\n          return Promise.resolve(has(response, 'body.eventType') && has(response, 'body.subject'));\n        },\n        extract(response) {\n          return Promise.resolve(response);\n        }\n      }\n    ],\n    transforms: [\n      {\n        name: 'normalizeSingleStatusResponse',\n        direction: 'inbound',\n        fn(ctx, response) {\n          response.body.status = response.body.eventType;\n        }\n      }\n    ]\n  },\n  config\n});\n\nexport {default} from './presence';\n"]},"metadata":{},"sourceType":"script"}